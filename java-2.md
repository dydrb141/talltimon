# Java기본 2

### 프로세스와 스레드

**프로세스** :  

* 컴퓨터에서 연속적으로 실행되는 컴퓨터 프로그램
* 메모리에 올라와 실행되고 있는 프로그램 인스턴스
* 운영체제로부터 시스템 자원을 할당받는 작업의 단위

**스레드** :

* 프로세스 내에서 실행되는 여러 흐름의 단위
* 스레드는 프로세스 내에서 각각 스택만 할당 받고 code, data, heap영역은 공유

**자바 스레드란**:

* 일반 스레드와 거의 차이가 없으며 jvm 운영체제의 역할을 한다.
* 자바는 프로세스가. 존재하지 않고 스레드만 존재
* 스레드 스케쥴링은 전적으로 jvm에 의해서 의루어진다

### 멀티 프로세스와 멀티 스레드 차이

멀티 프로세싱

 - 하나의 응용프로그램을 여러개의 프로세스로 구성하여 각 프로세스가 하나의 작업을 처리하도록 하는것

장점

 - 여러 개의 자식 프로세스중 하나에 문제가 발생 하더라도 다른 자식들에게 영향을 주지 않음

단점

컨텍스트 스위칭 오버헤드

 - 컨텍스트 스위칭 과정에서 캐쉬 메머리 초기화 등 무거운 작업이 진행 되고 많은 시간이 듬

  - 각각 독립된 메모리를 할당 받았기 때문에 각각의 프로세스들은 변수를 공유 할 수 없다.

컨텍스트 스위칭이란? CPU에서 여러 프로세스들이 돌아가면서 작업을 처리하는 과정

멀티 스레드

 - 하나의 응용 프로그램을 여러개의 스레드로 구성

* 각 스레드로 하나의 작업을 처리
* 웹 서버는 대표적인 멀티 스레드 응용 프로그램

장점

* 시스템 자원 소모 감소
* 시스템 처리량 증가
* 간단한 통신 방법으로 인한 프로그램 응답시간 단축
* 
단점

 - 디버깅이 어려움

 -  단일 프로세스인 경우 효과를 기대하기 어려움

 - 자원 공유 문제\(동기화 문제\)

 - 하나의 스레드가 문제가 발생하면 전체 프로세스가 영향 받음

동시성 과 병렬성

동시성 :  하나의 코어에서 멀티 스레드가 번갈아 가며 실행 \(번갈아 가면서 실행하는게 빨라서 동시 작업으로 보임\)

병렬성 : 멀티 코어에서 개별 스레드를 동시에 실행 

스레드 스케줄링

 - 스레드를 어떤 순서에 의해 동시성으로 실행할 것인가를 결정

스레드 스케줄링 방식

 - 우선순위 방식 : 우선순위가 높은 스레드가 실행 상태를 더 많이 가져감 \(setPriority\(\)\) 10이가장 높음

 - 라운드 로빈 방식 : 시간 할당량\(time slice\)를 정해서 하나의 스레드를 정해진 시간만큼 실행하고 다시 다른 스레드를 실행하는 방식 

    즉 정해진 시간에만 실행 

임계영역 : 단 하나의 스레드만 실행할 수 있는 코드 영역 자바에서는 syncronized 메소드와 동기화 블록을 제공하여 임계영역을 제공할 수 있다.

스레드 상태

NEW \(객체생성\): 스레드 객체 생성 아직 start\(\)를 호출 안함

RUNNABLE\(실행대기\): 실행 상태로 언제든 갈 수 있는 상태

RUNNING \(실행\): run메소드를 실행하는 상태

일시정지

 - WATING : 다른 스레드가 통지할 때 까지 기다리는 상태

 - TIME\_WATING: 주어진 시간 동안 기다리는 상태

 - BLOCKED :  사용하고자 하는 객체의 락이 풀릴때 까지 기다리는 상태

TERMINATED \(종료\) :  실행을 마친 상태

스레드풀

 -  작업 처리에 사용되는 스레드를 제한된 개수만큼 정해 놓고 큐에 들어오는 작업들을 하나씩 스레드가 맡아서 처리

Java.util.concurrent 패키지에서 ExecutorService인터페이스 와 Executors클래스르 ㄹ제공

