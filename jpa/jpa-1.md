# JPA 기본

### Jpa가 머냐

 - 자바진영 ORM 표준 기술 

 - JPA는 자바 ORM기술에 대한 API 표준 명세

 - 하이버네이트는 JPA를 구현한 프레임워크

### ORM은 머냐

 - Oriented Relational Mapping 의 약자로써 객체와 관계형 데이터 베이스의 데이터를 자동으로 매핑 해주는 기술

즉 JPA는 자바진영 ORM기술에 대한 API를 명세 한거고 ORM은 객체와 관계형 데이터베이스를 자동으로 매핑해주는 기술을 말한다. JPA 명세를 구현한게 여러가지 있지만 그중 하이버네이트를 많이 사용하고 스프링에서는 하이버네이트를 사용하기 위해서 spring-data-jpa를 제공해준다.

### JPA를 왜 사용하나?\(장점 ORM장점과 동일함\)

**장점**

* 객체지향적 코드로 인해 더 직관적이고 비즈니스 로직에 더 집중할 수 있다. \(sql을 작성하지 않아도 된다\) 
* 생산성과 유지보수가 좋아짐 \( 객체 재사용 가능\)
*  테스트를 작성하기에 편리해짐
*  코드를 수정하지 않고 데이터 베이스를 손쉽게 변경 \(dbms종속성이 줄어듬, 벤더 독립성 \(Dialect\)\)

**단점**

* ORM만으로는 서비스를 구현하기가 어렵다
* 복**잡**성이 커질경우 난이도도 올라갈 수 있음
* 프로시저가 많으면 적용하기 어려움 

### 영속성 컨텍스트란

 - 엔티티를 영구 저장하는 환경 

 - 엔티티 매니저로 엔티티를 저장하거나 조회하면 엔티티 매니저는 영속성 컨텍스트에 엔티트를 보관하고 관리함

### 엔티티 생명주기

4가지 상태 생명주기가 존재

1. 비영속\(new/transient\) : 영속성 컨텍스트와 전혀 관계가 없는 상태
2. 영속 : 영속성 컨텍스트에 저장된 상태
3. 준영속: 영속성 컨텍스트에 저장되었다가 분리된 상태 \(em.close\(\), em.clear\(\), em.detach\(\)\) 
4. 삭제 : 삭제된 상태  \(em.remove\)



